(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-ea0b"],{ELky:function(e,t,i){"use strict";var a=i("ypK6");i.n(a).a},FWDC:function(e,t,i){"use strict";var a=i("rai6");i.n(a).a},qbIC:function(e,t,i){"use strict";i.r(t);var a=i("t3Un"),l=i("Qyje"),r=i.n(l);function n(e){return Object(a.a)({contentType:"application/json",url:"/deliverystandard/invalid",method:"post",data:r.a.stringify({id:e})})}var o=i("p46w"),s=i.n(o),m={name:"add",data:function(){var e=function(e,t,i){if(/^\d{1,3}$/.test(t))return i();i(new Error("输入不合法"))};return{ruleForm:{name:null,empname:null,invalidatemark:null,operationtime:new Date,units:null,maxweight:null,minweight:null},rules:{name:[{required:!0,message:"输入收派标准名称",trigger:"blur"}],maxweight:[{required:!0,message:"正确输入最大重量",trigger:"blur"},{validator:e,trigger:"blur"}],minweight:[{required:!0,message:"正确输入最小重量",trigger:"blur"},{validator:e,trigger:"blur"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(i){if(!i)return!1;var l=JSON.parse(s.a.get("user"));t.ruleForm.operatorid=l.id,t.ruleForm.operationunitid=l.systemunits.id,t.ruleForm.operationtime=t.timeFormat(t.ruleForm.operationtime),function(e){return Object(a.a)({contentType:"application/json",url:"/deliverystandard/add",method:"post",data:r.a.stringify(e)})}(t.ruleForm).then(function(i){i&&(t.$notify({title:"成功",message:"添加收派标准成功",type:"success"}),t.resetForm(e),t.$emit("addSuccess"))}).catch(function(e){})})},resetForm:function(e){this.$refs[e].resetFields()},timeFormat:function(e){var t=(e=new Date(e)).getFullYear(),i=e.getMonth()<10?"0"+e.getMonth():e.getMonth(),a=e.getDate()<10?"0"+e.getDate():e.getDate(),l=e.getHours()<10?"0"+e.getHours():e.getHours(),r=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),n=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();return[t,i+1,a].join("-")+" "+[l,r,n].join(":")}},created:function(){var e=JSON.parse(s.a.get("user"));this.ruleForm.empname=e.empname,this.ruleForm.units=e.systemunits.name}},u=(i("ELky"),i("KHd+")),c=Object(u.a)(m,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{align:"center"}},[i("el-form",{ref:"ruleForm",staticClass:"demo-form-inline",attrs:{model:e.ruleForm,rules:e.rules,size:"small","label-width":"auto","label-position":"left"}},[i("el-row",{attrs:{gutter:5}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"标准名称",prop:"name"}},[i("el-input",{staticStyle:{width:"55%"},attrs:{placeholder:"收派标准名称"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"作废标志",prop:"invalidatemark"}},[i("el-radio-group",{staticStyle:{width:"55%"},model:{value:e.ruleForm.invalidatemark,callback:function(t){e.$set(e.ruleForm,"invalidatemark",t)},expression:"ruleForm.invalidatemark"}},[i("el-radio",{attrs:{label:0,value:e.ruleForm.invalidatemark}},[e._v("是")]),e._v(" "),i("el-radio",{attrs:{label:1,value:e.ruleForm.invalidatemark}},[e._v("否")])],1)],1)],1)],1),e._v(" "),i("el-row",{attrs:{gutter:5}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"最小重量",prop:"minweight"}},[i("el-input",{staticStyle:{width:"55%"},attrs:{placeholder:"最小重量"},model:{value:e.ruleForm.minweight,callback:function(t){e.$set(e.ruleForm,"minweight",t)},expression:"ruleForm.minweight"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"最大重量",prop:"maxweight"}},[i("el-input",{staticStyle:{width:"55%"},attrs:{placeholder:"最大重量"},model:{value:e.ruleForm.maxweight,callback:function(t){e.$set(e.ruleForm,"maxweight",t)},expression:"ruleForm.maxweight"}})],1)],1)],1),e._v(" "),i("el-row",{attrs:{gutter:5}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"操作人员",prop:"empname"}},[i("el-input",{staticStyle:{width:"55%"},attrs:{disabled:"",placeholder:"操作人员"},model:{value:e.ruleForm.empname,callback:function(t){e.$set(e.ruleForm,"empname",t)},expression:"ruleForm.empname"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"操作单位",prop:"units"}},[i("el-input",{staticStyle:{width:"55%"},attrs:{disabled:"",placeholder:"操作单位"},model:{value:e.ruleForm.units,callback:function(t){e.$set(e.ruleForm,"units",t)},expression:"ruleForm.units"}})],1)],1)],1),e._v(" "),i("el-row",{attrs:{gutter:5}},[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"操作日期",prop:"operationtime"}},[i("el-date-picker",{staticStyle:{width:"47%"},attrs:{disabled:"",type:"datetime"},model:{value:e.ruleForm.operationtime,callback:function(t){e.$set(e.ruleForm,"operationtime",t)},expression:"ruleForm.operationtime"}})],1)],1)],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("提交")]),e._v(" "),i("el-button",{on:{click:function(t){e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)},[],!1,null,"7eb04f6c",null);c.options.__file="add.vue";var d=c.exports,p={name:"edit",props:["rowData"],data:function(){var e=function(e,t,i){if(/^\d{1,3}$/.test(t))return i();i(new Error("输入不合法"))};return{ruleForm:{name:null,empname:null,invalidatemark:1,operationtime:new Date,units:null,maxweight:null,minweight:null},rules:{name:[{required:!0,message:"输入收派标准名称",trigger:"blur"}],maxweight:[{required:!0,message:"正确输入最大重量",trigger:"blur"},{validator:e,trigger:"blur"}],minweight:[{required:!0,message:"正确输入最小重量",trigger:"blur"},{validator:e,trigger:"blur"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(i){if(!i)return!1;t.ruleForm.operationtime=t.timeFormat(t.ruleForm.operationtime),function(e){return Object(a.a)({contentType:"application/json",url:"/deliverystandard/edit",method:"post",data:r.a.stringify(e)})}(t.ruleForm).then(function(i){i&&(t.$notify({title:"成功",message:"编辑收派标准成功",type:"success"}),t.resetForm(e),t.$emit("editSuccess"))}).catch(function(e){})})},resetForm:function(e){this.$refs[e].resetFields()},timeFormat:function(e){var t=(e=new Date(e)).getFullYear(),i=e.getMonth()<10?"0"+e.getMonth():e.getMonth(),a=e.getDate()<10?"0"+e.getDate():e.getDate(),l=e.getHours()<10?"0"+e.getHours():e.getHours(),r=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),n=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();return[t,i+1,a].join("-")+" "+[l,r,n].join(":")}},watch:{rowData:{immediate:!0,deep:!0,handler:function(e){e.id&&(this.ruleForm.id=e.id,this.ruleForm.name=e.name,this.ruleForm.invalidatemark=e.invalidatemark?1:0,this.ruleForm.maxweight=e.maxweight,this.ruleForm.minweight=e.minweight,this.ruleForm.operationtime=e.operationtime)}}},created:function(){var e=JSON.parse(s.a.get("user"));this.ruleForm.empname=e.empname,this.ruleForm.operatorid=e.id,this.ruleForm.units=e.systemunits.name,this.ruleForm.operationunitid=e.systemunits.id}},h=(i("FWDC"),Object(u.a)(p,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{align:"center"}},[i("el-form",{ref:"ruleForm",staticClass:"demo-form-inline",attrs:{model:e.ruleForm,rules:e.rules,size:"small","label-width":"auto","label-position":"left"}},[i("el-row",{attrs:{gutter:5}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"标准名称",prop:"name"}},[i("el-input",{staticStyle:{width:"55%"},attrs:{placeholder:"收派标准名称"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"作废标志",prop:"invalidatemark"}},[i("el-radio-group",{staticStyle:{width:"55%"},model:{value:e.ruleForm.invalidatemark,callback:function(t){e.$set(e.ruleForm,"invalidatemark",t)},expression:"ruleForm.invalidatemark"}},[i("el-radio",{attrs:{label:0,value:e.ruleForm.invalidatemark}},[e._v("是")]),e._v(" "),i("el-radio",{attrs:{label:1,value:e.ruleForm.invalidatemark}},[e._v("否")])],1)],1)],1)],1),e._v(" "),i("el-row",{attrs:{gutter:5}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"最小重量",prop:"minweight"}},[i("el-input",{staticStyle:{width:"55%"},attrs:{placeholder:"最小重量"},model:{value:e.ruleForm.minweight,callback:function(t){e.$set(e.ruleForm,"minweight",t)},expression:"ruleForm.minweight"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"最大重量",prop:"maxweight"}},[i("el-input",{staticStyle:{width:"55%"},attrs:{placeholder:"最大重量"},model:{value:e.ruleForm.maxweight,callback:function(t){e.$set(e.ruleForm,"maxweight",t)},expression:"ruleForm.maxweight"}})],1)],1)],1),e._v(" "),i("el-row",{attrs:{gutter:5}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"操作人员",prop:"empname"}},[i("el-input",{staticStyle:{width:"55%"},attrs:{disabled:"",placeholder:"操作人员"},model:{value:e.ruleForm.empname,callback:function(t){e.$set(e.ruleForm,"empname",t)},expression:"ruleForm.empname"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"操作单位",prop:"units"}},[i("el-input",{staticStyle:{width:"55%"},attrs:{disabled:"",placeholder:"操作单位"},model:{value:e.ruleForm.units,callback:function(t){e.$set(e.ruleForm,"units",t)},expression:"ruleForm.units"}})],1)],1)],1),e._v(" "),i("el-row",{attrs:{gutter:5}},[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"操作日期",prop:"operationtime"}},[i("el-date-picker",{staticStyle:{width:"47%"},attrs:{disabled:"",type:"datetime"},model:{value:e.ruleForm.operationtime,callback:function(t){e.$set(e.ruleForm,"operationtime",t)},expression:"ruleForm.operationtime"}})],1)],1)],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("提交")])],1)],1)],1)},[],!1,null,"56ba58da",null));h.options.__file="edit.vue";var f={name:"index",data:function(){return{rowData:{},showAddDialog:!1,showEditDialog:!1,showMore:!1,loading:!0,dialogWidth:"40%",formInline:{name:null,invalidatemark:null,maxweight:null,minweight:null,systememp:{empname:null},operationtime:""},tableData:[],allData:[],multipleSelection:[]}},methods:{addSuccess:function(){this.getList(),this.showAddDialog=!1},editSuccess:function(){this.toggleSelection(),this.getList(),this.showEditDialog=!1},openAddDialog:function(){this.$refs.adddialog&&this.$refs.adddialog.resetForm("ruleForm"),this.setDialogWidth(),this.showAddDialog=!0},openEditDialog:function(){this.multipleSelection.length<=0?this.$message.error("请选中一项修改"):(this.$refs.editdialog&&this.$refs.editdialog.resetForm("ruleForm"),this.setDialogWidth(),this.rowData=this.multipleSelection[0],this.showEditDialog=!0)},setDialogWidth:function(){var e=document.getElementById("app");e.offsetWidth<=400?this.dialogWidth="100%":e.offsetWidth>400&&e.offsetWidth<=600?this.dialogWidth="90%":e.offsetWidth>600&&e.offsetWidth<=800?this.dialogWidth="80%":e.offsetWidth>1300?this.dialogWidth="35%":this.dialogWidth="60%"},InvalidClick:function(){var e=this;this.multipleSelection.length<=0?this.$message.error("请选中一项修改"):this.$confirm("您确定要设置当前项相反值？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var t=e.multipleSelection,i=0;i<t.length;i++)n(t[i].id).then(function(t){e.getList()}).catch(function(e){});e.toggleSelection(),e.$message({type:"success",message:"操作成功!"})}).catch(function(){e.toggleSelection(),e.$message({type:"info",message:"已取消操作"})})},onSubmit:function(){var e=this;if(this.tableData=this.allData,this.formInline.name&&(this.tableData=this.tableData.filter(function(t){return t.name.match(e.formInline.name)})),0!=this.formInline.invalidatemark&&1!=this.formInline.invalidatemark||(this.tableData=this.tableData.filter(function(t){if(t.invalidatemark==e.formInline.invalidatemark)return t})),null!=this.formInline.maxweight&&(this.tableData=this.tableData.filter(function(t){if(t.maxweight==e.formInline.maxweight)return t})),null!=this.formInline.minweight&&(this.tableData=this.tableData.filter(function(t){if(t.minweight==e.formInline.minweight)return t})),this.formInline.systememp.empname&&(this.tableData=this.tableData.filter(function(t){return t.systememp.empname.match(e.formInline.systememp.empname)})),this.formInline.operationtime){var t=this.timeFormat(this.formInline).split(" ")[0];this.tableData=this.tableData.filter(function(i){var a=e.timeFormat(i).split(" ")[0];if(t==a)return i})}},restForm:function(){this.formInline={name:null,invalidatemark:null,maxweight:null,minweight:null,systememp:{empname:null},operationtime:""}},handleSelectionChange:function(e){this.multipleSelection=e},InvalidSignFormat:function(e){return e.invalidatemark?"否":"是"},timeFormat:function(e){var t=e.operationtime,i=(t=new Date(t)).getFullYear(),a=t.getMonth()<10?"0"+t.getMonth():t.getMonth(),l=t.getDate()<10?"0"+t.getDate():t.getDate(),r=t.getHours()<10?"0"+t.getHours():t.getHours(),n=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),o=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();return[i,a+1,l].join("-")+" "+[r,n,o].join(":")},toggleSelection:function(){this.$refs.multipleTable.clearSelection()},getList:function(){var e=this;Object(a.a)({contentType:"application/json",url:"/deliverystandard/list",method:"post"}).then(function(t){e.loading=!0,e.allData=t.data,e.tableData=t.data,e.loading=!1}).catch(function(e){console.log(e)})}},created:function(){this.getList()},components:{add:d,edit:h.exports}},g=(i("yCU3"),Object(u.a)(f,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"layer-out"},[e._m(0),e._v(" "),i("div",{staticClass:"body-box"},[i("div",{staticClass:"main-box"},[i("el-form",{ref:"formInline",staticClass:"demo-form-inline main-header",attrs:{inline:!0,model:e.formInline}},[i("el-form-item",{attrs:{label:"标准名称"}},[i("el-input",{attrs:{placeholder:"请输入标准名称"},model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name",t)},expression:"formInline.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"作废标志"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formInline.invalidatemark,callback:function(t){e.$set(e.formInline,"invalidatemark",t)},expression:"formInline.invalidatemark"}},[i("el-option",{attrs:{label:"否",value:1}},[e._v("否")]),e._v(" "),i("el-option",{attrs:{label:"是",value:0}},[e._v("是")])],1)],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"success",icon:"el-icon-search"},on:{click:e.onSubmit}},[e._v("查询")]),e._v(" "),i("el-button",{attrs:{type:"info",icon:"el-icon-refresh"},on:{click:e.restForm}},[e._v("重置")]),e._v(" "),i("el-button",{attrs:{type:"info",icon:"el-icon-more"},on:{click:function(t){e.showMore=!e.showMore}}},[e._v("更多")])],1)],1),e._v(" "),i("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showMore,expression:"showMore"}],staticClass:"demo-form-inline main-header",attrs:{inline:!0,model:e.formInline}},[i("el-form-item",{attrs:{label:"最大重量"}},[i("el-input",{attrs:{placeholder:"请输入最大重量"},model:{value:e.formInline.maxweight,callback:function(t){e.$set(e.formInline,"maxweight",t)},expression:"formInline.maxweight"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"最小重量"}},[i("el-input",{attrs:{placeholder:"请输入最小重量"},model:{value:e.formInline.minweight,callback:function(t){e.$set(e.formInline,"minweight",t)},expression:"formInline.minweight"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"操作人"}},[i("el-input",{attrs:{placeholder:"请输入操作人"},model:{value:e.formInline.systememp.empname,callback:function(t){e.$set(e.formInline.systememp,"empname",t)},expression:"formInline.systememp.empname"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"操作时间"}},[i("el-date-picker",{attrs:{type:"date",placeholder:"请输入操作时间"},model:{value:e.formInline.operationtime,callback:function(t){e.$set(e.formInline,"operationtime",t)},expression:"formInline.operationtime"}})],1)],1),e._v(" "),i("div",{staticClass:"main-operation"},[i("el-button",{attrs:{type:"success",size:"mini"},on:{click:e.openAddDialog}},[e._v("新增")]),e._v(" "),i("el-button",{attrs:{type:"info",size:"mini"},on:{click:e.openEditDialog}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{type:"info",size:"mini"},on:{click:e.InvalidClick}},[e._v("作废")])],1),e._v(" "),i("div",{staticClass:"main-data"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)",data:e.tableData,"tooltip-effect":"dark",border:!0},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{align:"center",type:"selection"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"序号",width:"50",type:"index"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",prop:"name",label:"收派标准名称"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",prop:"minweight",label:"最小重量"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",prop:"maxweight",label:"最大重量"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",formatter:e.InvalidSignFormat,label:"作废标志"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",prop:"systememp.empname",label:"操作人员"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",prop:"systemunits.name",label:"操作单位"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",formatter:e.timeFormat,label:"操作时间"}})],1),e._v(" "),i("div",{staticClass:"data-foot-box"})],1)],1)]),e._v(" "),i("div",{staticClass:"foot-box"}),e._v(" "),i("el-dialog",{attrs:{title:"添加",visible:e.showAddDialog,"close-on-click-modal":!1,"before-close":e.addSuccess,width:e.dialogWidth},on:{"update:visible":function(t){e.showAddDialog=t}}},[i("add",{ref:"adddialog",on:{addSuccess:e.addSuccess}})],1),e._v(" "),i("el-dialog",{attrs:{title:"编辑",visible:e.showEditDialog,"close-on-click-modal":!1,"before-close":e.editSuccess,width:e.dialogWidth},on:{"update:visible":function(t){e.showEditDialog=t}}},[i("edit",{ref:"editdialog",attrs:{rowData:e.rowData},on:{editSuccess:e.editSuccess}})],1)],1)},[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"header-box"},[t("span",[this._v("收派标准")])])}],!1,null,"767bba20",null));g.options.__file="index.vue";t.default=g.exports},rai6:function(e,t,i){},yCU3:function(e,t,i){"use strict";var a=i("yOU+");i.n(a).a},"yOU+":function(e,t,i){},ypK6:function(e,t,i){}}]);